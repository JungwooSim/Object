# 11. 합성과 유연한 설계

상속과 합성은 객체지향 프로그래밍에서 가장 널리 사용되는 코드 재사용 기법이다.</br>
상속이 부모 클래스와 자식 클래스를 연결해서 부모 클래스의 코드를 재사용하는데 비해 합성은 전체를 표현하는 객체가 부분을 표현하는 객체를 포함해서 부분 객체의 코드를 재사용한다.</br>
상속에서 부모 클래스와 자식 클래스 사이의 의존성은 컴파일타임에 해결되지만 합성에서 두 객체 사이의 의존성은 런타임에 해결된다.</br>
상속 관계는 is - a 관계라 부르고 합성 관계는 has-a 관계라 부른다.</br>

합성은 구현에 의존하지 않는다는 점에서 상속과 다르다.</br>
합성은 내부에 포함되는 객체의 구현이 아닌 퍼블릭 인터페이스에 의존한다.</br>
따라서 합성을 이용하면 포함된 객체의 내부 구현이 변경되더라도 영향을 최소화할 수 있기 때문에 더 안정적인 코드를 얻을 수 있게 된다.</br>

상속 관계는 클래스 사이의 정적인 관계인 데 비해 합성 관계는 객체 사이의 동적인 관계다.</br>
상속 대신 합성을 사용하면 변경하기 쉽고 유연한 설계를 얻을 수 있다.</br>

### 01. 상속을 합성으로 변경하기

상속을 남용했을 때 직면할 수 있는 세 가지 문제점이 있다.

- 불필요한 인터페이스 상속 문제
    - 자식 클래스에게는 복잡한 부모 클래스의 오퍼레이션이 상속되기 때문에 자식 클래스 인스턴스의 상태가 불안정해지는 문제
- 메서드 오버라이딩의 오작용 문제
    - 자식 클래스가 부모 클래스의 메서드를 오버라이딩할 때 자식 클래스가 부모 클래스의 메서드 호출 방법에 영향을 받는 문제
- 부모 클래스와 자식 클래스의 동시 수정 문제
    - 부모 클래스와 자식 클래스 사이의 개념적인 결합으로 인해 부모 클래스를 변경할 때 자식 클래스도 함께 변경해야 하는 문제

합성을 사용하면 상속이 초래하는 세 가지 문제점을 해결할 수 있다.</br>
상속을 합성으로 바꾸는 방법은 매우 간단한데 자식 클래스에 선언된 상속 관계를 제거하고 부모 클래스의 인스턴스를 자식 클래스의 인스턴스 변수로 선언하면 된다.</br>
